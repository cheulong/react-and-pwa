{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"d:\\\\web\\\\study\\\\react-and-pwa\\\\nextjs\\\\pages\\\\edit-article-page.js\";\nimport React, { Component } from 'react';\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport '../style/edit-article-page.css';\nimport { Link } from 'react-router-dom';\n\nvar EditArticlePage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditArticlePage, _Component);\n\n  function EditArticlePage(props) {\n    var _this;\n\n    _classCallCheck(this, EditArticlePage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditArticlePage).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"article\", '');\n\n    _defineProperty(_assertThisInitialized(_this), \"articleList\", '');\n\n    _defineProperty(_assertThisInitialized(_this), \"findArticle\", function (articleList) {\n      return articleList.id === _this.props.match.params.id;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateArticle\", function (articleList) {\n      if (articleList.id === _this.props.match.params.id) {\n        articleList.title = _this.article.title;\n        articleList.content = _this.article.content;\n      }\n\n      return articleList.id === _this.props.match.params.id;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEditorStateChange1\", function (editorState1) {\n      _this.setState({\n        editorState1: editorState1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEditorStateChange\", function (editorState) {\n      _this.setState({\n        editorState: editorState\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"saveArticle\", function (title, content) {\n      _this.article.title = title;\n      _this.article.content = content;\n\n      var objIndex = _this.articleList.findIndex(function (obj) {\n        return obj.id === _this.props.match.params.id;\n      });\n\n      _this.articleList[objIndex].title = _this.article.title;\n      _this.articleList[objIndex].content = _this.article.content;\n      localStorage.clear();\n      localStorage.setItem('articles', _JSON$stringify(_this.articleList));\n    });\n\n    _this.articleList = JSON.parse(localStorage.getItem('articles'));\n    _this.article = _this.articleList.find(_this.findArticle);\n    var _title = _this.article.title;\n    var html = _this.article.content;\n    var contentBlock1 = htmlToDraft(_title);\n    var contentBlock = htmlToDraft(html);\n\n    if (contentBlock1 || contentBlock) {\n      var contentState1 = ContentState.createFromBlockArray(contentBlock1.contentBlocks);\n      var editorState1 = EditorState.createWithContent(contentState1);\n      var contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n      var editorState = EditorState.createWithContent(contentState);\n      _this.state = {\n        editorState1: editorState1,\n        editorState: editorState\n      };\n    }\n\n    return _this;\n  }\n\n  _createClass(EditArticlePage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          editorState1 = _this$state.editorState1,\n          editorState = _this$state.editorState;\n      return React.createElement(\"div\", {\n        className: \"article-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"page-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"< home\")), React.createElement(\"h1\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"Articles\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })), React.createElement(Editor, {\n        toolbarHidden: true,\n        editorState: editorState1,\n        wrapperClassName: \"title__wrapper\",\n        editorClassName: \"demo-editor\",\n        onEditorStateChange: this.onEditorStateChange1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"article-date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.saveArticle(draftToHtml(convertToRaw(editorState1.getCurrentContent())), draftToHtml(convertToRaw(editorState.getCurrentContent())));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"save-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \" Save \"))))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(Editor, {\n        editorState: editorState,\n        wrapperClassName: \"demo-wrapper\",\n        editorClassName: \"demo-editor\",\n        onEditorStateChange: this.onEditorStateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return EditArticlePage;\n}(Component);\n\nexport default EditArticlePage;","map":{"version":3,"sources":["d:\\web\\study\\react-and-pwa\\nextjs\\pages\\edit-article-page.js"],"names":["React","Component","EditorState","convertToRaw","ContentState","Editor","draftToHtml","htmlToDraft","Link","EditArticlePage","props","articleList","id","match","params","title","article","content","editorState1","setState","editorState","objIndex","findIndex","obj","localStorage","clear","setItem","JSON","parse","getItem","find","findArticle","html","contentBlock1","contentBlock","contentState1","createFromBlockArray","contentBlocks","createWithContent","contentState","state","onEditorStateChange1","saveArticle","getCurrentContent","onEditorStateChange"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,YAAtB,EAAoCC,YAApC,QAAwD,UAAxD;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,OAAO,kDAAP;AACA,OAAO,gCAAP;AACA,SAAQC,IAAR,QAAoB,kBAApB;;IAEMC,e;;;;;AAGJ,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,yFAAMA,KAAN;;AADiB,8DAFV,EAEU;;AAAA,kEADP,EACO;;AAAA,kEAmBL,UAACC,WAAD,EAAiB;AAC7B,aAAOA,WAAW,CAACC,EAAZ,KAAmB,MAAKF,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,CAAwBF,EAAlD;AACD,KArBkB;;AAAA,oEAuBH,UAACD,WAAD,EAAiB;AAC/B,UAAGA,WAAW,CAACC,EAAZ,KAAmB,MAAKF,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,CAAwBF,EAA9C,EAAkD;AAChDD,QAAAA,WAAW,CAACI,KAAZ,GAAoB,MAAKC,OAAL,CAAaD,KAAjC;AACAJ,QAAAA,WAAW,CAACM,OAAZ,GAAsB,MAAKD,OAAL,CAAaC,OAAnC;AACD;;AACD,aAAON,WAAW,CAACC,EAAZ,KAAmB,MAAKF,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,CAAwBF,EAAlD;AACD,KA7BkB;;AAAA,2EA+BI,UAACM,YAAD,EAAkB;AACvC,YAAKC,QAAL,CAAc;AACZD,QAAAA,YAAY,EAAZA;AADY,OAAd;AAGD,KAnCkB;;AAAA,0EAqCG,UAACE,WAAD,EAAiB;AACrC,YAAKD,QAAL,CAAc;AACZC,QAAAA,WAAW,EAAXA;AADY,OAAd;AAGD,KAzCkB;;AAAA,kEA2CL,UAACL,KAAD,EAAOE,OAAP,EAAmB;AAC/B,YAAKD,OAAL,CAAaD,KAAb,GAAqBA,KAArB;AACA,YAAKC,OAAL,CAAaC,OAAb,GAAuBA,OAAvB;;AACA,UAAMI,QAAQ,GAAG,MAAKV,WAAL,CAAiBW,SAAjB,CAA4B,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACX,EAAJ,KAAW,MAAKF,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,CAAwBF,EAAvC;AAAA,OAA/B,CAAjB;;AACA,YAAKD,WAAL,CAAiBU,QAAjB,EAA2BN,KAA3B,GAAiC,MAAKC,OAAL,CAAaD,KAA9C;AACA,YAAKJ,WAAL,CAAiBU,QAAjB,EAA2BJ,OAA3B,GAAmC,MAAKD,OAAL,CAAaC,OAAhD;AACAO,MAAAA,YAAY,CAACC,KAAb;AACAD,MAAAA,YAAY,CAACE,OAAb,CAAqB,UAArB,EAAiC,gBAAe,MAAKf,WAApB,CAAjC;AACD,KAnDkB;;AAEjB,UAAKA,WAAL,GAAmBgB,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACK,OAAb,CAAqB,UAArB,CAAX,CAAnB;AACA,UAAKb,OAAL,GAAe,MAAKL,WAAL,CAAiBmB,IAAjB,CAAsB,MAAKC,WAA3B,CAAf;AACA,QAAMhB,MAAK,GAAG,MAAKC,OAAL,CAAaD,KAA3B;AACA,QAAMiB,IAAI,GAAG,MAAKhB,OAAL,CAAaC,OAA1B;AACA,QAAMgB,aAAa,GAAG1B,WAAW,CAACQ,MAAD,CAAjC;AACA,QAAMmB,YAAY,GAAG3B,WAAW,CAACyB,IAAD,CAAhC;;AACA,QAAIC,aAAa,IAAEC,YAAnB,EAAiC;AAC/B,UAAMC,aAAa,GAAG/B,YAAY,CAACgC,oBAAb,CAAkCH,aAAa,CAACI,aAAhD,CAAtB;AACA,UAAMnB,YAAY,GAAGhB,WAAW,CAACoC,iBAAZ,CAA8BH,aAA9B,CAArB;AACA,UAAMI,YAAY,GAAGnC,YAAY,CAACgC,oBAAb,CAAkCF,YAAY,CAACG,aAA/C,CAArB;AACA,UAAMjB,WAAW,GAAGlB,WAAW,CAACoC,iBAAZ,CAA8BC,YAA9B,CAApB;AACA,YAAKC,KAAL,GAAa;AACXtB,QAAAA,YAAY,EAAZA,YADW;AACEE,QAAAA,WAAW,EAAXA;AADF,OAAb;AAGD;;AAhBgB;AAiBlB;;;;6BAoCQ;AAAA;;AAAA,wBAC+B,KAAKoB,KADpC;AAAA,UACCtB,YADD,eACCA,YADD;AAAA,UACeE,WADf,eACeA,WADf;AAEP,aACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD;AAAM,QAAA,EAAE,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAf,CADA,EAEM;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFN,EAGM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHN,CADA,EAMA,oBAAC,MAAD;AACI,QAAA,aAAa,MADjB;AAEI,QAAA,WAAW,EAAEF,YAFjB;AAGI,QAAA,gBAAgB,EAAC,gBAHrB;AAII,QAAA,eAAe,EAAC,aAJpB;AAKI,QAAA,mBAAmB,EAAE,KAAKuB,oBAL9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANA,EAaA;AAAG,QAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAa;AAAQ,QAAA,OAAO,EAAE;AAAA,iBAAK,MAAI,CAACC,WAAL,CAAiBpC,WAAW,CAACH,YAAY,CAACe,YAAY,CAACyB,iBAAb,EAAD,CAAb,CAA5B,EAA6ErC,WAAW,CAACH,YAAY,CAACiB,WAAW,CAACuB,iBAAZ,EAAD,CAAb,CAAxF,CAAL;AAAA,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgK;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAhK,CAAb,CAAP,CAA5B,CAbA,EAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdA,EAeE,oBAAC,MAAD;AACE,QAAA,WAAW,EAAEvB,WADf;AAEE,QAAA,gBAAgB,EAAC,cAFnB;AAGE,QAAA,eAAe,EAAC,aAHlB;AAIE,QAAA,mBAAmB,EAAE,KAAKwB,mBAJ5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAfF,CADF;AAwBD;;;;EAlF2B3C,S;;AAqF9B,eAAeQ,eAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport '../style/edit-article-page.css';\r\nimport {Link } from 'react-router-dom';\r\n\r\nclass EditArticlePage extends Component {\r\n  article ='';\r\n  articleList='';\r\n  constructor(props) {\r\n    super(props);\r\n    this.articleList = JSON.parse(localStorage.getItem('articles'));\r\n    this.article = this.articleList.find(this.findArticle);\r\n    const title = this.article.title;\r\n    const html = this.article.content;\r\n    const contentBlock1 = htmlToDraft(title);\r\n    const contentBlock = htmlToDraft(html);\r\n    if (contentBlock1||contentBlock) {\r\n      const contentState1 = ContentState.createFromBlockArray(contentBlock1.contentBlocks);\r\n      const editorState1 = EditorState.createWithContent(contentState1);\r\n      const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\r\n      const editorState = EditorState.createWithContent(contentState);\r\n      this.state = {\r\n        editorState1,editorState\r\n      };\r\n    }\r\n  }\r\n\r\n  findArticle = (articleList) => { \r\n    return articleList.id === this.props.match.params.id;\r\n  }\r\n\r\n  updateArticle = (articleList) => { \r\n    if(articleList.id === this.props.match.params.id) {\r\n      articleList.title = this.article.title;\r\n      articleList.content = this.article.content;\r\n    }\r\n    return articleList.id === this.props.match.params.id;\r\n  }\r\n\r\n  onEditorStateChange1 = (editorState1) => {\r\n    this.setState({\r\n      editorState1,\r\n    });\r\n  };\r\n\r\n  onEditorStateChange = (editorState) => {\r\n    this.setState({\r\n      editorState,\r\n    });\r\n  };\r\n\r\n  saveArticle = (title,content) => {\r\n    this.article.title = title;\r\n    this.article.content = content;\r\n    const objIndex = this.articleList.findIndex((obj => obj.id === this.props.match.params.id));\r\n    this.articleList[objIndex].title=this.article.title;\r\n    this.articleList[objIndex].content=this.article.content;\r\n    localStorage.clear();\r\n    localStorage.setItem('articles', JSON.stringify(this.articleList));\r\n  }\r\n\r\n  render() {\r\n    const { editorState1, editorState } = this.state;\r\n    return (\r\n      <div className=\"article-content\">\r\n      <div className=\"page-title\">\r\n      <Link to={`/`}><h2>&lt; home</h2></Link>\r\n            <h1 className=\"title\">Articles</h1>\r\n            <hr/>\r\n          </div>\r\n      <Editor\r\n          toolbarHidden\r\n          editorState={editorState1}\r\n          wrapperClassName=\"title__wrapper\"\r\n          editorClassName=\"demo-editor\"\r\n          onEditorStateChange={this.onEditorStateChange1}\r\n        />\r\n      <p className=\"article-date\"><small><Link to='/'><button onClick={() =>this.saveArticle(draftToHtml(convertToRaw(editorState1.getCurrentContent())),draftToHtml(convertToRaw(editorState.getCurrentContent())))}><span className=\"save-btn\"> Save </span></button></Link></small></p>\r\n      <hr/>\r\n        <Editor\r\n          editorState={editorState}\r\n          wrapperClassName=\"demo-wrapper\"\r\n          editorClassName=\"demo-editor\"\r\n          onEditorStateChange={this.onEditorStateChange}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditArticlePage;\r\n"]},"metadata":{},"sourceType":"module"}